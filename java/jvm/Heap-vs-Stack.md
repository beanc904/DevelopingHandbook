堆（Heap）和栈（Stack）是计算机内存中两种常见的管理方式，它们在内存分配和使用上有很大的不同，下面对两者进行对比和介绍：

---

### **栈（Stack）**
- **内存分配方式**：  
  栈是一种先进后出（LIFO）的数据结构，内存是**自动分配**的，由编译器根据函数调用的上下文来管理。
  
- **用途**：  
  用于存储局部变量、函数参数、返回地址等，随着函数的调用和返回动态调整。

- **特点**：  
  1. **高效**：栈的内存分配和释放速度非常快，只需移动栈指针。
  2. **作用域明确**：变量的生命周期受限于代码块或函数作用域，一旦超出作用域，内存会自动释放。
  3. **大小有限**：栈的大小通常较小（具体取决于系统），可能会导致**栈溢出**（Stack Overflow）。
  
- **示例（C/C++/Java 中）：**
  ```c
  void func() {
      int a = 10;  // 栈上分配
  }  // func 执行完毕，a 自动释放
  ```

---

### **堆（Heap）**
- **内存分配方式**：  
  堆是由程序员显式分配和释放的内存区域，通过动态内存分配函数（如 `malloc`、`new`）分配，由操作系统或运行时管理。
  
- **用途**：  
  用于动态分配内存，适合存储大小不确定、生命周期较长的数据。

- **特点**：  
  1. **灵活**：程序员可以根据需要分配任意大小的内存，生命周期不受函数作用域限制。
  2. **效率较低**：动态分配和释放内存需要额外的时间，容易造成内存碎片。
  3. **需要手动管理**：如果没有及时释放，会导致**内存泄漏**（Memory Leak）。

- **示例（C/C++/Java 中）：**
  ```c
  int* p = (int*)malloc(sizeof(int));  // 在堆上分配内存
  *p = 10;
  free(p);  // 释放内存
  ```

---

### **对比总结**

| 特性               | 栈（Stack）                       | 堆（Heap）                        |
|--------------------|-----------------------------------|-----------------------------------|
| **内存分配方式**   | 自动分配和释放                   | 手动分配和释放                   |
| **作用域**         | 局部、作用域结束即释放           | 程序员控制，释放前可全局访问     |
| **速度**           | 快，靠栈指针操作                | 慢，涉及内存管理和碎片整理       |
| **错误风险**       | 栈溢出                          | 内存泄漏、内存碎片               |
| **典型用途**       | 局部变量、函数调用栈            | 动态分配的数据或对象             |

### **堆与栈的联系**
在现代编程中，栈和堆经常同时使用。例如：
```java
void example() {
    // 栈上分配
    int x = 10;

    // 堆上分配
    String s = new String("Hello");
}
```
- `x` 位于栈中，是局部变量。
- `s` 的引用在栈中，而具体的字符串对象在堆中。

